# 6. 교착상태

[연습문제]

1. 2개 이상의 프로세스가 서로의 작업이 끝나기만 기다리며 작업을 더 이상 진행하지 못하는 상태를 무엇이라 하는가?
    1. 교착상태
2. 프로세스가 어떤 자원을 사용 중이고 어떤 자원을 기다리고 있는지를 나타내는 방향성이 있는 그래프를 무엇이라 하는가?
    1. 자원 할당 그래프
3. 네 가지 교착 상태 필요조건에 대해 설명하시오.
    1. 상호 배제, 비선점, 점유와 대기, 원형 대기
4. 교착 상태 해결 방법 중, 교착 상태를 유발하는 네 가지 조건을 무력화하는 방법은 무엇인가?
    1. 교착 상태 **예방**
5. 교착 상태 해결 방법 중, 교착 상태가 발생하지 않는 수준으로 자원을 할당하는 방법은 무엇인가?
    1. 교착 상태 **회피**
6. 교착 상태 해결 방법 중, 자원 할당 그래프를 사용하여 교착 상태를 발견하는 방법은 무엇인가?
    1. 자원 할당 그래프를 사용한 검출
7. 교착 상태 해결 방법 중, 타임아웃을 이용하여 해결하는 방법은 무엇인가?
    1. **타임아웃을 이용한 교착 상태 검출**
8. 교착 상태 해결 방법 중, 은행원 알고리즘을 사용하여 해결하는 방법은 무엇인가?
    1. **교착 상태 회피**를 구현하는 하나의 방법이다. 기본적으로 최악의 상황을 대비해 자원을 할당한다. 각 프로세스가 사용할 자원의 최대 수를 운영체제에 알려서, 운영체제가 현재 실행 중인 프로세스 가운데 하나라도 끝낼 수 있을 때 가용 자원을 할당한다.
9. 교착 상태 해결 방법 중, 모든 자원에 번호를 부여하고 낮은 번호의 자원을 사용할 수 없도록 하는 방법은 무엇인가?
    1. 원형 대기를 예방하는 것으로 숫자가 작은 자원을 잡은 상태에서 큰 숫자를 잡는 것은 허용하지만, 숫자가 큰 자원을 잡은 상태에서 작은 숫자를 잡는 것은 허용하지 않는다.
10. 교착 상태 해결 방법 중, 프로세스가 시작 초기에 자신이 사용하려는 모든 자원을 한꺼번에 점유하거나, 그렇지 못할 경우 자원을 모두 반납하는 방법은 무엇인가?
    1. 점유와 대기 예방
11. 교착 상태 해결 방법 중, 교착 상태가 검출되면 교착 상태를 일으킨 모든 프로세스를 종료하는 방법은 무엇인가?
    1. 교착 상태 회복의 하나로, 교착 상태에 빠진 모든 프로세스를 종료한 후 다시 실행할 때는 순차적으로 실행해야 한다. 그렇지 않으면 다시 교착 상태를 일으킬 수 있기 때문이다.
12. 자원 할당 그래프에서 무엇이 발견되면 교착 상태라고 판단할 수 있는가?
    1. 자원 할당 그래프에 사이클이 존재하면 교착 상태가 발생한 것으로 본다. 자원 할당 그래프에서 프로세스 간의 기다리는 관계만 나타낸, *대기 그래프*를 추출할 수 있다. 대기 그래프에서 기다리는 자원이 없는 프로세스를 연속적으로 지워내서, 최종적으로 원형 관계가 보이면 교착 상태라고 판단한다.
    2. 자원 할당 그래프에서 자원 대기 그래프를 추출해낼 수 있다. 자원 대기 그래프란 필요한 자원을 할당받기 위해서 끝나기를 기다리는 프로세스 관계를 나타낸 것으로, 그 안에서 원형 관계가 발견되면 교착 상태라고 할 수 있다.

[심화 문제]

1. 교착 상태 해결 방법 중 프로세스가 시작 초기에 자신이 사용하려는 모든 자원을 한꺼번에 점유하거나, 그렇지 못할 경우 자원을 모두 반납하는 방법이 있다. 이 방법의 단점을 설명하시오.
    1. 프로세스가 자원을 점유한 상태에서 다른 자원을 기다리지 못하게 하는 방법이다. 점유와 대기를 예방하는 것인데, 1) 프로세스가 자신이 사용하는 모든 자원을 자세히 알기 어렵다. 2) 프로세스가 당장 사용하지도 않을 자원까지 미리 선점해버리기 때문에 자원의 활용성이 떨어진다. 3) 많은 자원을 사용하는 프로세스가 적은 자원을 사용하는 프로세스보다 불리하다. 4) 결국 일괄 작업 방식 즉, 자원을 획득한 프로세스가 끝날 때까지 다른 프로세스는 작업할 수 없는 방식으로 동작하여 시스템의 효율이 떨어진다.
2. 교착 상태 회피 방법인 은행원 알고리즘의 단점을 설명하시오.
    1. 먼저, 각 프로세스가 필요한 모든 자원을 미리 선언하기란 쉽지 않다. 안정 상태나 불안정 상태를 파악하려면 시스템의 전체 자원 수가 고정적이어야 하는데, 일시적으로 고장나거나 자원이 추가되는 일이 빈번하여 시스템의 자원 수는 유동적이다. 항상 불안정 상태를 방지해야 하므로 자원 낭비가 있다.
3. 교착 상태 검출 시 타임아웃을 이용하는 방법의 장단점을 설명하시오.
    1. 자원 할당 그래프를 통한 검출보다 구현하기가 쉽지만 응답 시간이 길어진 원인이 꼭 교착 상태에 빠졌다고 단언할 수 없다는 단점이 있다. 그래서 엉뚱한 프로세스가 강제 종료될 수 있다.
    또, 타임아웃 방법은 하나의 운영체제 내에서 동작하는 프로세스들을 감시하기 때문에 적용할 수 있는 건데, 분산 시스템의 경우 적용하기가 어렵다. 프로세스의 응답이 없는 것이 교착 상태 때문인지, 네트워크 때문인지, 단순히 처리가 늦어지는 지 알 수 없기 때문이다.

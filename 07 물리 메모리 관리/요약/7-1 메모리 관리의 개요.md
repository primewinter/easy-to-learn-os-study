# 7-1. 메모리 관리의 개요

## 1. 메모리 관리

### 메모리 구조

메모리의 구조는 1B 크기로 나뉘어 0번지부터 시작한다.

CPU는 메모리에 있는 내용을 가져오거나 작업 결과를 메모리에 저장하기 위해 ***메모리 주소 레지스터**MAR*를 사용한다.

### 메모리 관리의 복잡성

메모리는 폰노이만 구조의 컴퓨터에서 유일한 작업 공간

- 일괄처리 시스템 : 한 번에 하나씩 실행하므로 단순
- 시분할 시스템 : 모든 프로그램이 메모리에 올라와야 실행 가능(운영체제도 프로그램이므로 메모리에 올라와서 실행)

### 메모리 관리의 이중성

메모리 관리란 할당된 공간이 부족하면 새로 확보하고, 작업 중인 프로세스를 옮기고, 빈 공간이 여러 개 생기면 합치는 등의 매우 복잡한 일이다.

- 프로세스 입장 : 메모리를 독차지하려 함(작업의 편리함)
- 메모리 관리자 입장 : 되도록 관리를 효율적으로 하고 싶어함(관리의 편리함)

<aside>
🗒️ 프로그램을 SSD 같은 저장장치가 아니라 메모리에서 실행하는 이유=💰

느리고 값싼 하드디스크는 제2저장장치로 사용하고 비싸고 빠른 메모리는 작업 공간으로 사용한다. 같은 맥락에서 메모리보다 용량은 작지만 속도가 빠른 캐시 메모리를 추가로 사용한다.
메모리를 계층적 구조로 만들어 작업 속도를 올리고 가격을 낮추는 방법을 ***계층적 메모리 구조***라고 한다.

</aside>

## 2. 소스 코드의 번역과 실행

### 컴파일러와 인터프린터의 동작

언어 번역 프로그램은 *고급 언어high level language*로 작성한 소스코드를 컴퓨터가 실행할 수 있는 기계어로 번역하는 프로그램이다.

- **컴파일러** : 소스코드를 컴퓨터가 실행할 수 있는 기계어로 번역한 후 **한꺼번**에 실행 *C언어, Java*
- **인터프리터** : 소스코드를 **한 행씩** 번역하여 실행 *JavaScript, Basic*

### 컴파일러의 목적

- **오류 발견** : 심벌 테이블symbol table(각 변수의 이름과 종류를 모아놓은 것)을 사용하여 변수를 선언했는지, 타입에 맞게 사용했는지 판별
- **코드 최적화** : 사용하지 않는 변수 삭제 → 속도🆙

### 컴파일러와 인터프리터의 차이

![https://user-images.githubusercontent.com/57691894/194736123-1564ae67-b5f7-470c-b682-b182db2de6a4.png](https://user-images.githubusercontent.com/57691894/194736123-1564ae67-b5f7-470c-b682-b182db2de6a4.png)

### 컴파일 과정

사용자가 작성한 소스코드를 *목적 코드object code*로 변환한 후 라이브러리를 연결하고 최종 실행 파일을 만들어 실행하는 과정

1. **소스코드 작성 및 컴파일** : *목적 코드ojbect code* 획득
2. **목적 코드와 라이브러리 연결** : 라이브러리에 있는 코드를 *목적 코드*에 삽입하여 최종 실행 파일 생성
3. **동적 라이브러리를 포함하여 최종 실행** : 라이브러리의 함수가 바뀔 때마다 새로 컴파일 하지 않고 실행 코드를 라이브러리에서 가져와 실행(*동적 라이브러리dynamic library)*

## 4. 메모리 관리자의 역할

***메모리 관리 유닛**Memory Manage Utit, MMU*이라는 하드웨어를 메모리 관리자라고 부른다.

- **가져오기 fetch** : 프로세스와 데이터를 메모리로 가져오는 작업
    - 일반적으로 프로세스 요청 시 메모리로 가져오기
    - 필요하다고 예상되는 데이터 미리 가져오기prefetch

- **배치 placement** : 가져온 프로세스와 데이터를 어떻게 손질하고, 메모리의 어디에 올릴지 결정하는 작업
    - 페이징paging : 메모리를 같은 크기로 자르는 것
    - 세그먼테이션segmentation : 메모리를 프로세스의 크기에 맞게 자르는 것

- **재배치 replacement** : 새로운 프로세스를 가져와야 하는데 메모리가 꽉 찬 경우 오래된 프로세스를 내보내는 작업
    - 교체 알고리즘replacement algorithm : 앞으로 사용하지 않을 프로세스를 찾아서 내보내는 알고리즘

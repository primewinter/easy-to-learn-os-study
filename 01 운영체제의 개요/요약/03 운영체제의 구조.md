# 1-3. 운영체제의 구조

## 1. 커널과 인터페이스

운영체제는 크게 인터페이스와 커널로 구성되어 있다. 

![image](https://user-images.githubusercontent.com/57691894/185752733-802af804-a1f1-4be8-8469-d92998e7d13f.png)

### 커널

프로세스 관리, 메모리 관리, 저장장치 관리와 같은 운영체제의 핵심적인 기능을 모아놓은 것

운영체제의 성능은 커널이 좌우한다.

e.g. 구글의 안드로이드, 애플의 iOS

### 인터페이스

사용자와 응용 프로그램에 인접하여 커널에 사용자의 명령을 전달하고 실행 결과를 사용자에게 알려주는 역할

e.g. 명령어 기반의 셸, 그래픽 기반의 Mac OS X (둘 다 유닉스 계열의 커널을 이용한 인터페이스다.)

## 2. 시스템 호출과 디바이스 드라이버

### 시스템 호출

응용 프로그램과 커널의 인터페이스

응용 프로그램이 하드웨어 자원에 접근하거나 운영체제가 제공하는 서비스를 이용하려 할 때는 *시스템 호출*을 사용한다.

운영체제는 커널이 제공하는 서비스를 시스템 호출로 제한하고 다른 방법으로 커널에 들어오지 못하게 막음으로써 컴퓨터 자원을 보호한다. (그림에서 시스템 호출이 커널 앞부분 전체를 감싸는 이유)

커널이 제공하는 서비스를 이용하기 위한 인터페이스이며, 사용자가 자발적으로 커널 영역에 진입할 수 있는 유일한 수단이다.

✅ 직접 접근

사용자가 직접 컴퓨터 자원에 접근하여 작업하는 방식으로, 사용자가 모든 것을 처리해야 한다.

데이터를 저장하려 할 때 사용자마다 저장하는 위치가 다를 수 있으며 사용자에 의해 데이터가 지워지거나 수정될 수 있다.


### 드라이버

커널과 하드웨어의 인터페이스

커널이 모든 하드웨어에 맞는 인터페이스를 다 개발하기는 어렵기 때문에 커널은 입출력의 기본적인 부분만 제작하고, **하드웨어의 특성을 반영한 소프트웨어**(디바이스 드라이버)를 하드웨어 제작자에게 받아 커널이 실행될 때 함께 실행되도록 한다.

복잡하지 않은 디바이스 드라이버는 커널에 포함되어 있어서 컴퓨터에 연결만 하면 바로 작동하지만, 크기가 크고 복잡한 디바이스 드라이버는 사용자가 직접 설치해야 한다. (그림에서 드라이버가 커널 전체를 감싸고 있지 않은 이유)

## 3. 커널의 구성

### **커널이 하는 일**

- 프로세스 관리 : 프로세스에 CPU를 배분하고 작업에 필요한 제반 환경 제공
- 메모리 관리 : 프로세스에 작업 공간을 배치하고 실제 메모리보다 큰 가상공간 제공
- 파일 시스템 관리 : 데이터를 저장하고 접근할 수 있는 인터페이스 제공
- 입출력 관리 : 필요한 입력과 출력 서비스 제공
- 프로세스 간 통신 관리 : 공동 작업을 위한 각 프로세스 간 통신 환경 지원

커널은 이러한 **기능을 어떻게 구현하는가에 따라** 단일형 구조 커널, 계층형 구조 커널, 마이크로 구조 커널로 구분된다.

### 단일형 구조 커널

초창기의 운영체제 구조로, 커널의 핵심 기능을 구현하는 모듈들이 구분 없이 하나로 구성

예) MS-DOS, VMS, 초기의 유닉스 운영체제

**장점**

- 모듈 간의 통신 비용이 줄어들어 효율적인 운영 가능

**단점**

- 모든 모듈이 하나로 묶여 있기 때문에 버그나 오류 처리 어려움
- 기능상의 작은 결함이 시스템 전체로 확산되기 쉬움
- 다양한 환경의 시스템에 적용하기 어려움(이식성이 낮음)
- 현대의 운영체제는 매우 크고 복잡하기 때문에 완전 단일형 구조의 운영체제를 구현하기 어려움

### 계층형 구조 커널

![image](https://user-images.githubusercontent.com/57691894/185752764-5e570ba6-8191-414e-8be7-3460d33f90ec.png)

비슷한 기능을 가진 모듈을 묶어서 하나의 계층으로 만들고 계층 간의 통신을 통해 운영체제를 구현

오늘날의 운영체제는 대부분 이 구조를 채택

예) 마이크로소프트의 윈도우

**장점**

- 단일형 구조보다 버그나 오류를 쉽게 처리할 수 있음

### 마이크로 구조 커널

프로세스 관리, 메모리 관리, 프로세스 간 통신 관리 등 가장 기본적인 기능만 제공

다른 커널에 비해 운영체제의 많은 부분이 사용자 영역에 구현되어 있음

예) 마하 - 애플의 PC운영체제인 OS X과 모바일 운영체제인 iOS의 커널로 사용

**장점**

- 각 모듈은 독립적으로 작동하기 때문에 하나의 모듈이 실패하더라도 전체 운영체제가 멈추지 않음
- 많은 컴퓨터에 적용하기 쉬움(높은 이식성)
- 커널이 가벼워 CPU 용량이 작은 시스템에도 적용 가능

## 4. 가상 머신

운영체제와 응용 프로그램 사이에서 작동하여 응용 프로그램이 OS에 종속받지 않게 만드는 프로그램

가상머신을 설치하면 응용 프로그램이 어떤 운영체제에서든 동일한 환경에서 작동하는 것처럼 보임

예) JVM - 자바는 유닉스와 윈도우에서 작동하도록 다양한 가상머신을 만들어 배포하고 있다(자바는 OS에 독립적이라는 특성을 갖게 됨)
